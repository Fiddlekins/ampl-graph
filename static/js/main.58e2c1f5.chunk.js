(this["webpackJsonpampl-graph"]=this["webpackJsonpampl-graph"]||[]).push([[0],{44:function(t,e,a){t.exports={app:"App_app__Wr7YK"}},46:function(t,e,a){t.exports={plot:"Graph_plot__3vXLE"}},52:function(t,e,a){},61:function(t,e,a){"use strict";a.r(e);var n,r=a(18),c=a.n(r),s=a(41),o=a.n(s),i=(a(52),a(6)),u=a(15),l=a.n(u),p=a(24),h=a(5),f=a(8),d=a(9),y=a(42),m=a(69),v=a(71),b=a(70),j=864e5,x=new m.a({uri:"https://api.thegraph.com/subgraphs/name/aalavandhan/ampleforth",cache:new v.a}),_=Object(b.a)(n||(n=Object(y.a)(["\n  query getRebases($first: Int, $lastEpoch: BigInt!) {\n    rebases(first: $first, orderBy: epoch, where: { epoch_gte: $lastEpoch }) {\n      id,\n      supply,\n      epoch\n    }\n  }\n"])));function O(){return g.apply(this,arguments)}function g(){return(g=Object(p.a)(l.a.mark((function t(){var e,a,n,r,c,s,o,i,u,p;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=[],a=new Set,n=1e3,r=!0,c=0;case 5:if(!r){t.next=16;break}return t.next=8,x.query({query:_,variables:{first:n,lastEpoch:c}});case 8:s=t.sent,o=s.data.rebases,r=o.length>=n,c=parseInt(o[o.length-1].epoch,10),i=Object(h.a)(o);try{for(i.s();!(u=i.n()).done;)p=u.value,a.has(p.id)||(e.push(p),a.add(p.id))}catch(l){i.e(l)}finally{i.f()}t.next=5;break;case 16:return t.abrupt("return",e.map((function(t){var e=t.supply,a=t.epoch;return{epoch:parseInt(a,10),totalSupply:parseFloat(e)}})));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function k(){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("https://api.coingecko.com/api/v3/coins/ampleforth/market_chart?vs_currency=usd&days=max");case 2:return e=t.sent,t.abrupt("return",e.json());case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(){return D.apply(this,arguments)}function D(){return(D=Object(p.a)(l.a.mark((function t(){var e,a,n,r,c,s,o,u,p,f,d,y,m,v,b,x,_,g,w,S,D,I,P,z,E;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([O(),k()]);case 2:e=t.sent,a=Object(i.a)(e,2),n=a[0],r=a[1],c=r.market_caps,s=r.prices,o=r.total_volumes,u={},p=Object(h.a)(c);try{for(p.s();!(f=p.n()).done;)d=Object(i.a)(f.value,2),y=d[0],m=d[1],u[y]||(u[y]={timestamp:y}),u[y].market_cap=m}catch(l){p.e(l)}finally{p.f()}v=Object(h.a)(s);try{for(v.s();!(b=v.n()).done;)x=Object(i.a)(b.value,2),_=x[0],g=x[1],u[_]||(u[_]={timestamp:_}),u[_].price=g}catch(l){v.e(l)}finally{v.f()}w=Object(h.a)(o);try{for(w.s();!(S=w.n()).done;)D=Object(i.a)(S.value,2),I=D[0],P=D[1],u[I]||(u[I]={timestamp:I}),u[I].total_volume=P}catch(l){w.e(l)}finally{w.f()}return z=Object.keys(u).map((function(t){return parseInt(t,10)})).sort((function(t,e){return t-e})),E=z[0],t.abrupt("return",z.map((function(t,e){var a=u[t];return{marketCap:a.market_cap,price:a.price,totalVolume:a.total_volume,totalSupply:n[e].totalSupply,daysSinceStart:(t-E)/j}})));case 17:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var I=new(function(){function t(){Object(f.a)(this,t),this._handlers={},this._boundPollData=this._pollData.bind(this),this._pollData()}return Object(d.a)(t,[{key:"on",value:function(t,e,a){this._handlers[t]||(this._handlers[t]=new Set),this._handlers[t].add({handler:e,context:a})}},{key:"off",value:function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this._handlers[t]){var n,r=Object(h.a)(this._handlers[t]);try{for(r.s();!(n=r.n()).done;){var c=n.value;c.handler!==e||a&&c.context!==a||this._handlers[t].delete(c)}}catch(s){r.e(s)}finally{r.f()}}}},{key:"emit",value:function(t){if(this._handlers[t]){for(var e=arguments.length,a=new Array(e>1?e-1:0),n=1;n<e;n++)a[n-1]=arguments[n];var r,c=Object(h.a)(this._handlers[t]);try{for(c.s();!(r=c.n()).done;){var s=r.value,o=s.handler,i=s.context;i?o.call.apply(o,[i].concat(a)):o.apply(void 0,a)}}catch(u){c.e(u)}finally{c.f()}}}},{key:"_pollData",value:function(){var t=Object(p.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S();case 2:e=t.sent,this.emit("data",e),setTimeout(this._boundPollData,36e5);case 5:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()}]),t}()),P=a(44),z=a.n(P),E=a(45),F=a.n(E),T=a(46),B=a.n(T),C=a(19);function L(t){var e=t.amplData,a=e.map((function(t){return t.price})),n=e.map((function(t){return t.totalSupply})),r=e.map((function(t){return t.totalVolume})),c=e.map((function(t){return t.daysSinceStart})),s=[{x:a,y:n,z:r,type:"scatter3d",mode:"lines+markers",marker:{color:c,colorscale:"Rainbow",size:3},text:c.map((function(t){return"Day ".concat(t)}))}];return Object(C.jsx)(F.a,{data:s,layout:{autosize:!0,title:"AMPL historical data",scene:{aspectratio:{x:1,y:1,z:1},xaxis:{title:{text:"Price"}},yaxis:{title:{text:"Total Supply"},type:"log",autorange:!0},zaxis:{title:{text:"Total Volume"},type:"log",autorange:!0}}},useResizeHandler:!0,className:B.a.plot})}var $=function(){var t=Object(r.useState)([]),e=Object(i.a)(t,2),a=e[0],n=e[1];return Object(r.useEffect)((function(){var t=function(t){n(t)};return I.on("data",t),function(){I.off("data",t)}})),Object(C.jsx)("div",{className:z.a.app,children:Object(C.jsx)(L,{amplData:a})})},q=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,73)).then((function(e){var a=e.getCLS,n=e.getFID,r=e.getFCP,c=e.getLCP,s=e.getTTFB;a(t),n(t),r(t),c(t),s(t)}))};o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)($,{})}),document.getElementById("root")),q()}},[[61,1,2]]]);
//# sourceMappingURL=main.58e2c1f5.chunk.js.map